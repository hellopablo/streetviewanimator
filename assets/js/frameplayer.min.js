"undefined"==typeof window.frameplayer&&(window.frameplayer={},window.FP=window.frameplayer),window.frameplayer.debug={enabled:!1,log:function(a,b){return this.execConsoleFunc("log",a,b)},info:function(a,b){return this.execConsoleFunc("info",a,b)},warn:function(a,b){return this.execConsoleFunc("warn",a,b)},error:function(a,b){return this.execConsoleFunc("error",a,b)},execConsoleFunc:function(a,b,c){if(this.enabled&&"undefined"!=typeof console)for(var d=["log","info","warn","error"],e=d.length-1;e>=0;e--)if(d[e]===a&&"function"==typeof console[d[e]]){var f=[b];if("undefined"!=typeof c)for(var g=0;g<c.length;g++)f.push(c[g]);console[d[e]].apply(console,f);break}return this}},window.frameplayer.frame=function(a){var b=this,c=window.frameplayer;return b.url=null,b.loaded=null,b.__construct=function(){return b.url=a,b.loaded=!1,b},b.load=function(){b.log("Loading frame",b.url);var a=new $.Deferred,c=new Image;return c.onload=function(){b.loaded=!0,a.resolve()},c.onerror=function(){b.error("Failed to load frame; URL: "+b.url),b.loaded=!0,a.resolve()},c.src=b.url,a.promise()},b.getUrl=function(){return b.url},b.isLoaded=function(){return b.loaded},b.log=function(){return c.debug.log("FP [Frame]:",arguments),b},b.error=function(){return c.debug.error("FP [Frame]:",arguments),b},b.__construct()},window.frameplayer.player=function(a){var b=this,c=window.frameplayer;return b.options={frameRate:12,domElement:null,canvasClass:".canvas",scrubberClass:".scrubber",coverImg:null,renderMode:"background",bufferSize:"30%",loop:!1,debug:!1,autoPlay:!1,autoLoad:!1,frames:[],onReady:function(){},onLoadStart:function(){},onLoadStop:function(){},onLoadProgress:function(a,b,c){},onLoadComplete:function(){},onPlay:function(){},onBufferStart:function(){},onBufferStop:function(){},onStop:function(){},onEnterFrame:function(a){},onExitFrame:function(a){},onLoop:function(){},onReset:function(){}},b.ready=!1,b.frames=[],b.playerState="STOPPED",b.loaderState="STOPPED",b.currentFrame=null,b.lastFrameLoaded=null,b.element=null,b.canvas=null,b.scrubber=null,b.playerTimeout=null,b.__construct=function(){return b.options=$.extend(!0,b.options,a),b.options.debug&&(c.debug.enabled=!0),b.log("Constructing"),b.options.frames.length&&b.setFrames(b.options.frames),"string"==typeof b.options.domElement?b.element=$(b.options.domElement).first():b.element=$(b.options.domElement).first(),b.canvas=b.element.find(b.options.canvasClass).first(),b.scrubber=b.element.find(b.options.scrubberClass).first(),b.ready=!0,b.playerState="STOPPED",b.options.coverImg?(b.log("Rendering Cover Image: "+b.options.coverImg),b.renderUrl(b.options.coverImg)):frames.length&&b.goToFrame(0),b.options.onReady.call(b),b.frames.length&&b.options.autoPlay?b.play():b.frames.length&&b.options.autoLoad&&b.load(),b},b.setFrames=function(a){return b.log("Setting frames; "+a.length+" frames"),b.clearFrames(),b.addFrames(a),b},b.clearFrames=function(){return b.log("Clearing frames"),b.frames=[],b},b.addFrames=function(a){b.log("Appending "+a.length+" frames");for(var c=0;c<a.length;c++)b.addFrame(a[c]);return b},b.addFrame=function(a){return b.log("Adding Frame: "+a),b.frames.push(new c.frame(a)),b.loaderState="STOPPED",b},b.goToFrame=function(a){return b.ready?(b.log("Going to frame "+a),b.currentFrame=a,b.renderFrame(a)):b.warn("goToFrame(): Player is not ready"),b},b.renderFrame=function(a){if("object"==typeof b.frames[a]){var c=b.frames[a];b.log("Rendering frame number "+a),b.renderUrl(c.getUrl())}else b.error("Invalid Frame Number");return b},b.renderUrl=function(a){return"background"===b.options.renderMode?b.canvas.css("background-image","url("+a+")"):"img"===b.options.renderMode?b.canvas.html('<img src="'+a+'">'):b.error("Invalid Render Mode ("+b.options.renderMode+")"),b},b.requiresBuffer=function(){if("COMPLETE"!==b.loaderState){var a,c=b.currentFrame||0,d=b.lastFrameLoaded-c;return a="string"==typeof b.options.bufferSize&&"%"===b.options.bufferSize.substr(-1)?Math.ceil(b.frames.length*(parseInt(b.options.bufferSize)/100)):parseInt(b.options.bufferSize,10),a>d}return!1},b.play=function(){return b.ready?"STOPPED"===b.playerState&&(b.getNumFrames()?(b.log("Playing..."),b.playerState="PLAYING",b.options.onPlay.call(b),"STOPPED"===b.loaderState&&b.load(),b.requiresBuffer()?b.buffer():b.doPlay()):b.warn("No Frames to play")):b.warn("play(): Player is not ready"),b},b.doPlay=function(){if("STOPPED"!==b.playerState){null===b.currentFrame&&(b.currentFrame=0);b.currentFrame;b.options.onEnterFrame.call(b,b.currentFrame),"function"==typeof b.options["onEnterFrame"+b.currentFrame]&&b.options["onEnterFrame"+b.currentFrame].call(b,b.currentFrame),b.renderFrame(b.currentFrame);var a=b.frames.length-1,c=b.currentFrame/a*100;b.scrubber.find(".current").width(c+"%");var d=1e3/b.options.frameRate;clearTimeout(b.playerTimeout),b.playerTimeout=setTimeout(function(){b.options.onExitFrame.call(b,b.currentFrame),"function"==typeof b.options["onExitFrame"+b.currentFrame]&&b.options["onExitFrame"+b.currentFrame].call(b,b.currentFrame),"object"==typeof b.frames[b.currentFrame+1]?(b.currentFrame++,b.frames[b.currentFrame].isLoaded()?b.doPlay():b.buffer()):(b.currentFrame=0,b.options.loop?(b.options.onLoop.call(b),b.doPlay()):b.stop())},d)}return b},b.buffer=function(){return b.log("Buffering"),b.playerState="BUFFERING",b.element.addClass("buffering"),b.options.onBufferStart.call(b),b.doBuffer(),b},b.doBuffer=function(){return"STOPPED"!==b.playerState?b.requiresBuffer()?setTimeout(function(){b.doBuffer()},500):(b.log("Buffer full"),b.playerState="PLAYING",b.bufferStop(),b.doPlay()):b.bufferStop(),b},b.load=function(){if(b.ready){if("STOPPED"===b.loaderState){var a=null;if(null===b.lastFrameLoaded){b.log("No frames loaded, looking for first frame.");for(var c=0;c<b.frames.length;c++)if(!b.frames[c].isLoaded()){a=c;break}}else"object"==typeof b.frames[b.lastFrameLoaded+1]&&(a=b.lastFrameLoaded+1);null!==a?(b.log("Loading..."),b.loaderState="LOADING",b.options.onLoadStart.call(b),b.doLoad(a)):b.log("No frames to load.")}}else b.warn("play(): Player is not ready");return b},b.doLoad=function(a){return b.log("Loading frame "+a),b.calcPercentLoaded(),b.frames[a].load().done(function(){b.log("Loaded frame "+a),b.lastFrameLoaded=a;b.calcPercentLoaded();"LOADING"===b.loaderState&&("object"==typeof b.frames[b.lastFrameLoaded+1]?b.doLoad(b.lastFrameLoaded+1):(b.log("Loading complete"),b.loaderState="COMPLETE",b.options.onLoadComplete.call(b)))}),b},b.calcPercentLoaded=function(){var a=b.frames.length-1,c=b.lastFrameLoaded||0,d=c/a*100;return b.scrubber.find(".loaded").width(d+"%"),b.options.onLoadProgress.call(b,c+1,b.frames.length,d),d},b.stop=function(){return b.ready?"STOPPED"!==b.playerState&&(b.log("Stopping playback..."),b.playerState="STOPPED",b.options.onStop.call(b),b.loadStop()):b.warn("stop(): Player is not ready"),b},b.bufferStop=function(){return b.options.onBufferStop.call(b),b.element.removeClass("buffering"),b},b.loadStop=function(){return"LOADING"===b.loaderState&&(b.log("Stopping load..."),b.loaderState="STOPPED",b.options.onLoadStop.call(b)),b},b.getPlayerState=function(){return b.playerState},b.getLoaderState=function(){return b.loaderState},b.getCurrentFrame=function(){return b.currentFrame},b.getNumFrames=function(){return b.frames.length},b.reset=function(a){return b.log("Resetting player"),b.stop(),a?(b.currentFrame=null,b.lastFrameLoaded=null,b.options.coverImg=null,b.frames=[],b.scrubber.find(".current").width("0%"),b.scrubber.find(".loaded").width("0%"),"background"===b.options.renderMode?b.canvas.removeAttr("style"):"img"===b.options.renderMode&&b.canvas.empty()):(b.currentFrame=0,b.options.coverImg?b.renderUrl(b.options.coverImg):frames.length&&b.goToFrame(0)),b.options.onReset.call(b),b.options.onReady.call(b),b},b.log=function(){return c.debug.log("FP [Player]:",arguments),b},b.error=function(){return c.debug.error("FP [Player]:",arguments),b},b.warn=function(){return c.debug.warn("FP [Player]:",arguments),b},b.__construct()};
//# sourceMappingURL=frameplayer.min.js.map