"undefined"==typeof window.streetviewanimator&&(window.streetviewanimator={},window.SVA=window.streetviewanimator),window.streetviewanimator.debug={enabled:!1,log:function(a,b){return this.execConsoleFunc("log",a,b)},info:function(a,b){return this.execConsoleFunc("info",a,b)},warn:function(a,b){return this.execConsoleFunc("warn",a,b)},error:function(a,b){return this.execConsoleFunc("error",a,b)},execConsoleFunc:function(a,b,c){if(this.enabled&&"undefined"!=typeof console)for(var d=["log","info","warn","error"],e=d.length-1;e>=0;e--)if(d[e]===a&&"function"==typeof console[d[e]]){var f=[b];if("undefined"!=typeof c)for(var g=0;g<c.length;g++)f.push(c[g]);console[d[e]].apply(console,f);break}return this}},window.streetviewanimator.map=function(a,b){var c=this,d=window.streetviewanimator;return c.__construct=function(){c.log("Constructing")},c.log=function(){return d.debug.log("SVA [Map]:",arguments),c},c.error=function(){return d.debug.error("SVA [Map]:",arguments),c},c.__construct()},window.streetviewanimator.movie=function(a){var b=this,c=window.streetviewanimator;return b.options={debug:!1,playerDebug:!1,router:{apiKey:null},player:{frameRate:12,frameWidth:600,frameHeight:338,domElement:null,mode:"background"},scenes:[],onReady:function(){},onSceneCreate:function(a){},onSceneUpdate:function(a){},onSceneDestroy:function(){},onGenerateStart:function(){},onGenerateEnd:function(){},onPlayerReady:function(a){},onPlayerLoadStart:function(a){},onPlayerLoadStop:function(a){},onPlayerLoadProgress:function(a,b,c,d){},onPlayerLoadComplete:function(a){},onPlayerPlay:function(a){},onPlayerBufferStart:function(a){},onPlayerBufferStop:function(a){},onPlayerStop:function(a){},onPlayerEnterFrame:function(a,b){},onPlayerExitFrame:function(a,b){},onPlayerLoop:function(a){},onPlayerReset:function(a){}},b.scenes={},b.generated=!1,b.isGenerating=!1,b.__construct=function(){if(b.options=$.extend(!0,b.options,a),b.options.debug&&(c.debug.enabled=!0),b.options.playerDebug&&(b.options.player.debug=!0),b.log("Constructing"),b.router=new c.router(b.options.router,b),"undefined"==typeof window.frameplayer)throw"Dependency FramePlayer is not available http://hellopablo.github.io/frameplayer";if(b.options.player.onReady=function(){b.options.onPlayerReady.call(this)},b.options.player.onLoadStart=function(){b.options.onPlayerLoadStart.call(this)},b.options.player.onLoadStop=function(){b.options.onPlayerLoadStop.call(this)},b.options.player.onLoadProgress=function(a,c,d){b.options.onPlayerLoadProgress.call(this,a,c,d)},b.options.player.onLoadComplete=function(){b.options.onPlayerLoadComplete.call(this)},b.options.player.onPlay=function(){b.options.onPlayerPlay.call(this)},b.options.player.onBufferStart=function(){b.options.onPlayerBufferStart.call(this)},b.options.player.onBufferStop=function(){b.options.onPlayerBufferStop.call(this)},b.options.player.onStop=function(){b.options.onPlayerStop.call(this)},b.options.player.onEnterFrame=function(a){b.options.onPlayerEnterFrame.call(this,a)},b.options.player.onExitFrame=function(a){b.options.onPlayerExitFrame.call(this,a)},b.options.player.onLoop=function(){b.options.onPlayerLoop.call(this)},b.options.player.onReset=function(){b.options.onPlayerReset.call(this)},b.player=new window.frameplayer.player(b.options.player,b),b.options.scenes.length)for(var d=0;d<b.options.scenes.length;d++)b.scene(b.options.scenes[d].id,b.options.scenes[d]);return b.options.onReady.call(b),b},b.scene=function(a,d){return"undefined"==typeof b.scenes[a]?(b.scenes[a]=new c.scene(a,d,b),b.generated=!1,b.options.onSceneCreate.call(b,b.scenes[a])):(b.scenes[a].setOptions(d),b.generated=!1,b.options.onSceneUpdate.call(b,b.scenes[a])),b.scenes[a]},b.getNumScenes=function(){var a=0;for(var c in b.scenes)a++;return a},b.getNumFrames=function(){var a,c=0;for(var d in b.scenes)a=b.scenes[d].getNumFrames(),b.log("Scene ["+d+"] has "+a+" frames"),c+=a;return c},b.generate=function(){if(b.isGenerating)return b.warn("Generation in progress, ignoring call"),!1;b.log("Beginning scene generation"),b.isGenerating=!0,b.options.onGenerateStart.call(b);var a=new $.Deferred;return b.requiresGeneration()?b.doGenerate(a):(b.isGenerating=!1,b.generated=!0,b.log("Movie is already generated"),a.resolve(a)),a.done(function(){b.isGenerating=!1,b.generated=!0,b.log("Completed movie generation"),b.options.onGenerateEnd.call(b)}),a.promise()},b.doGenerate=function(a){var c;for(var d in b.scenes)if(b.scenes[d].requiresGeneration()){c=b.scenes[d];break}c?c.generate().done(function(){b.doGenerate(a)}):(b.log("No scenes require generation"),a.resolve())},b.requiresGeneration=function(){return!b.generated},b.play=function(){var a=new $.Deferred;if(b.requiresGeneration())b.generate().done(function(){b.log("Setting frames in player"),b.player.reset(!0);for(var c in b.scenes)b.log("Setting frames for scene ["+c+"]"),b.player.addFrames(b.scenes[c].getFrames());b.log("Beginning playback"),b.player.play(),a.resolve()});else{b.log("Setting frames in player"),b.player.reset(!0);for(var c in b.scenes)b.log("Setting frames for scene ["+c+"]"),b.player.addFrames(b.scenes[c].getFrames());b.log("Beginning playback"),b.player.play(),a.resolve()}return a.promise()},b.stop=function(){return b.player.stop(),b},b.log=function(){return c.debug.log("SVA [Movie]:",arguments),b},b.warn=function(){return c.debug.warn("SVA [Movie]:",arguments),b},b.__construct()},window.streetviewanimator.router=function(a,b){var c=this,d=window.streetviewanimator;return c.apiKey=a.apiKey,c.__construct=function(){c.log("Constructing")},c.setApiKey=function(a){return c.apiKey=a,c},c.log=function(){return d.debug.log("SVA [Router]:",arguments),c},c.error=function(){return d.debug.error("SVA [Router]:",arguments),c},c.__construct()},window.streetviewanimator.scene=function(a,b,c){var d=this,e=window.streetviewanimator;return d.movie=c,d.sceneId=a||null,d.type=b.type||"AUTO",d.origin=b.origin||null,d.destination=b.destination||null,d.duration=b.duration||5,d.target=b.target||null,d.pitch=b.pitch||10,d.fov=b.fov||10,d.frames=b.frames||[],d.generated=!1,d.__construct=function(){return d.log("Constructing"),d.log("Scene Type: "+d.type),d.setOptions(b),d.validateOptions(),d},d.setOptions=function(a){return"undefined"!=typeof a.type&&(d.type=b.type||"AUTO"),"undefined"!=typeof a.origin&&(d.origin=b.origin||null),"undefined"!=typeof a.destination&&(d.destination=b.destination||null),"undefined"!=typeof a.duration&&(d.duration=b.duration||5),"undefined"!=typeof a.target&&(d.target=b.target||null),"undefined"!=typeof a.pitch&&(d.pitch=b.pitch||10),"undefined"!=typeof a.fov&&(d.fov=b.fov||10),"undefined"!=typeof a.frames&&(d.frames=b.frames||[]),"MANUAL"===d.type&&(d.generated=!0),d.validateOptions()},d.validateOptions=function(){if("AUTO"===d.type){if(!d.origin)throw"An origin must be specified";if(null!==d.origin&&"object"==typeof d.origin){if("undefined"==typeof d.origin.lat||!d.origin.lat.length)throw"If origin is supplied as an object, the lat property cannot be empty";if("undefined"==typeof d.origin.lng||!d.origin.lng.length)throw"If origin is supplied as an object, the lng property cannot be empty"}if(!d.destination)throw"An destination must be specified";if(null!==d.destination&&"object"==typeof d.destination){if("undefined"==typeof d.destination.lat||!d.destination.lat.length)throw"If destination is supplied as an object, the lat property cannot be empty";if("undefined"==typeof d.destination.lng||!d.destination.lng.length)throw"If destination is supplied as an object, the lng property cannot be empty"}if(null!==d.target&&"object"==typeof d.target){if("undefined"==typeof d.target.lat||!d.target.lat.length)throw"If target is supplied as an object, the lat property cannot be empty";if("undefined"==typeof d.target.lng||!d.target.lng.length)throw"If target is supplied as an object, the lng property cannot be empty"}}else{if("MANUAL"!==d.type)throw'Invalid scene type "'+d.type+'"';if(!d.frames.length)throw"Scenes of type MANUAL must define at least 1 frame"}return d},d.generate=function(){var a=new $.Deferred;return d.requiresGeneration()?(d.log("Requires generation"),d.log("Beginning generation"),d.log("Completed generation"),d.frames=["http://lorempixel.com/600/338/people","http://lorempixel.com/600/338/abstract","http://lorempixel.com/600/338/animals","http://lorempixel.com/600/338/food"],d.generated=!0,a.resolve()):(d.log("Generation not required"),a.resolve()),a.promise()},d.requiresGeneration=function(){return!d.generated},d.getId=function(){return d.sceneId},d.getFrames=function(){return d.frames},d.getNumFrames=function(){return d.frames.length},d.log=function(){return e.debug.log("SVA [Scene:"+d.getId()+"]:",arguments),d},d.error=function(){return e.debug.error("SVA [Scene:"+d.getId()+"]:",arguments),d},d.__construct()};
//# sourceMappingURL=streetviewanimator.min.js.map