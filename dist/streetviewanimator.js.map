{"version":3,"file":"streetviewanimator.js","sources":["../src/main.js","../src/debug.js","../src/map.js","../src/movie.js","../src/router.js","../src/scene.js"],"names":["window","streetviewanimator","SVA","debug","enabled","log","caller","items","this","execConsoleFunc","info","warn","error","method","console","methods","i","length","args","x","push","apply","map","options","movieInstance","base","$SVA","__construct","arguments","movie","playerDebug","router","apiKey","player","frameRate","frameWidth","frameHeight","domElement","mode","scenes","onReady","onSceneCreate","scene","onSceneUpdate","onSceneDestroy","onGenerateStart","onGenerateEnd","onPlayerReady","onPlayerLoadStart","onPlayerLoadStop","onPlayerLoadProgress","lastFrameLoaded","totalFrames","percentageLoaded","onPlayerLoadComplete","onPlayerPlay","onPlayerBufferStart","onPlayerBufferStop","onPlayerStop","onPlayerEnterFrame","currentFrame","onPlayerExitFrame","onPlayerLoop","onPlayerReset","generated","isGenerating","$","extend","frameplayer","call","onLoadStart","onLoadStop","onLoadProgress","onLoadComplete","onPlay","onBufferStart","onBufferStop","onStop","onEnterFrame","onExitFrame","onLoop","onReset","id","sceneId","setOptions","getNumScenes","numScenes","key","getNumFrames","numFrames","sceneNumFrames","generate","deferred","Deferred","requiresGeneration","resolve","doGenerate","done","promise","play","reset","addFrames","getFrames","stop","setApiKey","type","origin","destination","duration","target","pitch","fov","frames","validateOptions","newOptions","lat","lng","getId"],"mappings":"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"}